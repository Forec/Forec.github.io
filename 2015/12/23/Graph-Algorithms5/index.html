<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>最短路径 | Forec&#39;s Notes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="Algorithms" />
    
    <meta name="description" content="分析图论中各类最短路径问题的算法设计，给出 Bellman-Ford，Dijkstra，SPFA 和 Floyd-Warshall 算法描述与代码。">
<meta property="og:type" content="article">
<meta property="og:title" content="最短路径">
<meta property="og:url" content="http://forec.github.io/2015/12/23/Graph-Algorithms5/index.html">
<meta property="og:site_name" content="Forec's Notes">
<meta property="og:description" content="分析图论中各类最短路径问题的算法设计，给出 Bellman-Ford，Dijkstra，SPFA 和 Floyd-Warshall 算法描述与代码。">
<meta property="og:image" content="http://7xktmz.com1.z0.glb.clouddn.com/shortest-path.jpg">
<meta property="og:updated_time" content="2016-11-04T13:56:17.806Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="最短路径">
<meta name="twitter:description" content="分析图论中各类最短路径问题的算法设计，给出 Bellman-Ford，Dijkstra，SPFA 和 Floyd-Warshall 算法描述与代码。">
    

    
        <link rel="alternate" href="/atom.xml" title="Forec&#39;s Notes" type="application/atom+xml" />
    

    
        <link rel="icon" href="http://7xktmz.com1.z0.glb.clouddn.com/sitefavicon.png# path to favicon" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css" type="text/css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css" type="text/css">

    <link rel="stylesheet" href="/css/style.css" type="text/css">

    <script src="/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css" type="text/css">
    
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">关于我</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/columns/index.html">专栏</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/projects/index.html">个人项目列表</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="http://forec.cn">FOREC 的官方网站</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js" type="text/javascript"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Code/">Code</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-Graph-Algorithms5" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        最短路径
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                <a href="/2015/12/23/Graph-Algorithms5/" class="article-date">
    <time datetime="2015-12-23T02:20:51.000Z" itemprop="datePublished">2015-12-23</time>
</a>
                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithms/">Algorithms</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <blockquote>
<p>分析图论中各类最短路径问题的算法设计，给出 Bellman-Ford，Dijkstra，SPFA 和 Floyd-Warshall 算法描述与代码。</p>
</blockquote>
<a id="more"></a>
<h1 id="问题分类"><a href="#问题分类" class="headerlink" title="问题分类"></a>问题分类</h1><ul>
<li>最短路径问题中，给出的是一个带权有向图G=（V，E），无向图可以认为是双向的有向图。加权函数w：E-&gt;R为从边到实型权值的映射，路径p=<v0,v1,...,vk>的权指其组成边的所有权值之和。定义从u到v的最短路径为所有从u到v的路径中权值最小的路径，若不存在从u到v的路径则权值为正无穷。</v0,v1,...,vk></li>
<li>单源最短路径及其变体<ul>
<li>单源最短路径：已知图G=（V，E），求从V中某个给定源点s到V中的其他所有顶点的最短路径。</li>
<li>单终点最短路径：将E反向，转化为单源最短路径。</li>
<li>单对顶点最短路径问题：对于某对给定顶点（u，v），找出u到v的最短路径。通常解决办法为找到u的单源最短路径。</li>
<li>每对顶点间最短路径问题：对每个顶点求单源最短路径，或采用Floyd-Warshall。</li>
</ul>
</li>
</ul>
<h1 id="算法设计"><a href="#算法设计" class="headerlink" title="算法设计"></a>算法设计</h1><h2 id="可能情况分析"><a href="#可能情况分析" class="headerlink" title="可能情况分析"></a>可能情况分析</h2><ul>
<li>最短路径的算法很明显依赖于最优子结构性质：假设当前求出了（u，v）的最短路径p，并且p上有两个中间节点（u’，v’），则u’到v’的最短路径一定是路径p上从u’到v’的路径。即：<strong>最短路径的子路径是最短路径</strong>。证明采用反证法。</li>
<li>假设你有两个传送门u和v，穿过一个传送门就可以到达另一个传送门的位置，并且从u到v会倒退时间t1,从v到u会前进时间t2，t1&gt;t2。此时你就可以无止境的穿越到过去的任意一个时间点，也就是说从u到v和从v到u均有路径，并且路径权值（从u到v和从v到u穿过传送门所需的时间之和t1+t2）是负数。此时形成了负权环，称其为负权回路（<strong>回路上的权值之和为负数</strong>，而不一定每条权值均为负数），负权回路上的最短路径是没有意义的，只要不停在u和v两点间穿梭，就可以让权值变为负无穷。但是，假如t2&gt;t1，此时只能任意穿越到未来，也就是说当负权路径存在但不存在负权回路时，不影响最短路径算法的求解。</li>
<li>回路问题：图G=（V，E）的任意一条无环路径至多包含|V|个不同的顶点，以及|V|-1条边。最短路径一定不能包含负权回路，同样也不能包含正权回路：假设最短路径上存在正权回路，则将该回路从路径中移除后，路径权值减小，但仍满足u-&gt;v。<h2 id="数据的记录和操作的实现"><a href="#数据的记录和操作的实现" class="headerlink" title="数据的记录和操作的实现"></a>数据的记录和操作的实现</h2></li>
<li>通常情况下最短路径的目的不仅在于其路径权值大小，还在于路径自身如何行走。最短路径的记录方法可以联想到链式结构，采用前趋数组p[v]记录到达v的前一个顶点。打印路径时，从v开始逆向打印，直到遇到源点s。</li>
<li><strong>松弛技术</strong>：对每个顶点v，均设置一个属性d[v]，在求解过程中描述从源点s到v的最短路径上权值的上界，求解结束后就是最短路径的权值，称为最短路径估计。初始化d[v]全部为正无穷，p[v]全部为nil（空）。d[s]=0（源点到自身的距离为0）。在求最短路径过程中，总是不停使用一种替换策略来寻求更小权值：当迄今为止找到的d[v]（s到v的权值）小于d[u]+w(u,v)时，就应当松弛边（u，v）。因此松弛操作要测试是否可以通过u来更新迄今为止所找到的v的最短路径。每次松弛操作可以减小最短路径估计，并更新前缀p[v]。下面的伪代码给出了对边（u，v）的松弛操作。</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RELAX(<span class="keyword">u</span>, v, w)</span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">d</span>[v] &gt; <span class="keyword">d</span>[<span class="keyword">u</span>] + <span class="literal">w</span>(<span class="keyword">u</span>,v)</span><br><span class="line">	   then <span class="keyword">d</span>[v] &lt;- <span class="keyword">d</span>[<span class="keyword">u</span>] + <span class="literal">w</span>(<span class="keyword">u</span>,v)</span><br><span class="line">	   		p[v] = <span class="keyword">u</span></span><br></pre></td></tr></table></figure>
<ul>
<li>正确性<ul>
<li>三角不等式：当最短路径求出后，对任意边(u,v)属于E，有d[v] &lt;= d[u] + w(u,v)。</li>
<li>上界性质：在求解最短路径过程中，对任意顶点v属于V，都有d[v] &gt;= MinPath(s,v)，这里用MinPath(s,v)代表从s到v实际的最短路径。一旦d[v]到达MinPath(s,v)，就不再改变。</li>
<li>无路径性质：若从s到v不存在路径，则d[v] = MinPath(s,v) = 正无穷。</li>
<li>收敛性质：若s ~&gt; u -&gt; v是图G中从s到u和v的最短路径，并且在松弛边（u，v）之前有d[u] = MinPath(s,u)，松弛操作后都有d[v] = MinPath(s,v)。</li>
<li>前趋子图性质：对于所有的v，一旦d[v] = MinPath(s,v)，则前趋子图就是一个以s为根的最短路径树。</li>
</ul>
</li>
</ul>
<h1 id="单源最短路径"><a href="#单源最短路径" class="headerlink" title="单源最短路径"></a>单源最短路径</h1><h2 id="Bellman-Ford"><a href="#Bellman-Ford" class="headerlink" title="Bellman-Ford"></a>Bellman-Ford</h2><ul>
<li>经过算法分析可知，松弛操作是求解最短路径的核心。需要解决的是如何通过多次松弛操作得到最短路径。</li>
<li>在算法分析的第一步，得到最短路径问题满足最优子结构，因此整个求解的过程是不断完善的，也就是在已经求解出的d[u]基础上更新更多的结点。因此思路可以按层次或按步骤展开。</li>
<li>Bellman-Ford算法：初始化在算法分析中，伪代码如下</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">BELLMAN_FORD(<span class="keyword">G</span>, w, s)</span><br><span class="line">    INITIALIZE_SINGLE_SOURCE(<span class="keyword">G</span>,s)</span><br><span class="line">    <span class="keyword">for</span> i from 1 to |V(<span class="keyword">G</span>)|-1:</span><br><span class="line">        <span class="keyword">for</span> each edge(<span class="keyword">u</span>,v) <span class="keyword">in</span> <span class="literal">E</span>(<span class="keyword">G</span>):</span><br><span class="line">            RELAX(<span class="keyword">u</span>, v, w)</span><br><span class="line">    <span class="keyword">for</span> each edge(<span class="keyword">u</span>,v) <span class="keyword">in</span> <span class="literal">E</span>(<span class="keyword">G</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">d</span>[v] &gt; <span class="keyword">d</span>[<span class="keyword">u</span>] + <span class="literal">w</span>(<span class="keyword">u</span>,v):</span><br><span class="line">            <span class="keyword">return</span> FALSE</span><br><span class="line">    <span class="keyword">return</span> TRUE</span><br></pre></td></tr></table></figure>
<p>执行过程：第一行初始化d和p数组，第2~4行，对每条边都进行松弛操作，并重复该过程|V(G)|-1次，结束后即可得最短路径。5~7行，判断得到的最短路径是否满足要求，即判断图中是否存在负权回路，存在则返回false，否则返回true。</p>
<ul>
<li>在第2~4行的操作中，共对所有边重复松弛了|V|-1次。理解如下：在第一次对所有边 的松弛中，得到了源点到所有最短路径长度为1的点的最短路径，也就是说，如果s~&gt;v的实际最短路径长度仅为一条边，则经过第一次循环的松弛操作，该最短路径就已经确定。第二次循环，在第一次循环已经确定的最短路基础上，可以得到源点到所有最短路径长度为两条边的点的最短路径。算法分析中已经得到，图G=（V，E）的任意无环路径最多只能有|V|-1条边，因此经过|V|-1次循环后，可以得到源点到所有顶点的最短路径。</li>
<li>在第5~7行的操作中，如果发现某条边还可以继续松弛，意味着2~4行求出的最短路径还可以更短，这就违背了算法分析中的收敛性质。因此存在负权环，返回FALSE。</li>
<li>BELLMAN-FORD算法可以求解图中存在负权的情况，对负权环的存在可以报错。</li>
</ul>
<h2 id="Dijkstra算法"><a href="#Dijkstra算法" class="headerlink" title="Dijkstra算法"></a>Dijkstra算法</h2><ul>
<li>Bellman-Ford算法的时间复杂度为O(VE)，Dijkstra算法可以将时间复杂度提升到O(V^2)，利用二叉最小堆实现优先队列进行维护则可以提升到O((V+E)lgV)，利用斐波那契堆可以将运行时间提升到O(VlgV+E)。</li>
<li>回顾求解最小生成树的Prim算法，在初始化阶段设置了一个集合S’只含任意一个结点，用来标记已在最小生成树中的结点，每次从顶点集合V-S’中取出一个顶点，该顶点满足：在所有V-S’的顶点中，该顶点到S’中的顶点距离最小。重复这个过程|V|-1次就可以得到最小生成树。参照这种思想设计Dijkstra算法。</li>
<li>Bellman-Ford算法可以理解为按层次展开。由Prim算法，推测Dijkstra则是按集合划分的“最短路径子图”（自己乱起的名字），初始状态该子图G’只包含源点s，每个计算周期后，向该集合增加一个结点u，并且源点到这个集合的所有结点的最短路径均已求出。这样重复n-1次后即可求出所有结点的最短路径。</li>
<li>如何实现上述推测：<br>上述操作的可行性，可以通过数学归纳法证明：（1）初始化状态下，s到s的最短路径为nil。（2）假设在第k次操作后，G’中含有k+1个结点，除s外还有k个结点，且s到这k个结点的最短路径已经求出。在第k+1次操作中，如何求出应该加入到G’的下一个结点？考虑到Bellman-Ford算法对所有边的|V|-1次松弛操作，当对所有边进行第一次松弛操作后，就已经求出了到源点s最短路径仅含1条边的点集。因此在Dijkstra算法的<strong>第k次操作中</strong>，利用加入的第k个结点对剩下的结点中与其直接相连的结点进行松弛操作，就可以得到<strong>基于已求出最短路径的前k个结点的最短路径估计</strong>。也就是，此时V-G’中的顶点的最短路径估计，都已经完全利用了前k个结点的最短路径（在第i次操作中利用了加入的第i个结点）。因此V-G’中顶点最短路径估计最小的顶点，就是k+1次操作需要加入的结点。</li>
<li>伪代码：</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DIJKSTRA(<span class="keyword">G</span>, w, s)</span><br><span class="line">	INITIALIZE_SINGLE_SOURCE(<span class="keyword">G</span>,s)</span><br><span class="line">	S &lt;- Nil</span><br><span class="line">	Q &lt;- V[<span class="keyword">G</span>]</span><br><span class="line">	<span class="keyword">while</span> Q != Nil:		# Q为剩余未加入<span class="keyword">G</span>’的顶点，Q=V-<span class="keyword">G</span>’</span><br><span class="line">		  <span class="keyword">u</span> &lt;- EXTRACT-<span class="literal">MIN</span>(Q)	# 选出Q中最短路径估计最小的顶点，用优先队列维护</span><br><span class="line">		  S &lt;- S | &#123;<span class="keyword">u</span>&#125;</span><br><span class="line">		  <span class="keyword">for</span> each vertex v <span class="keyword">in</span> Adj[<span class="keyword">u</span>]:	# 与<span class="keyword">u</span>有直接边相连的顶点</span><br><span class="line">		  	  RELAX(<span class="keyword">u</span>, v, w)</span><br></pre></td></tr></table></figure>
<ul>
<li>要注意的是，Dijkstra算法的正确性是依赖于：更长的最短路径是从短的最短路径发展而来的，例如s~&gt;v的路径是从s~&gt;u维护出来的，存在的问题在于<strong>短的最短路径一旦确定就不能修改</strong>。而Dijkstra总是选择<strong>当前能连到的V-G’中最近的顶点</strong>插入集合G’中，即使用了贪心策略。想象一个图：一共三个顶点1、2、3，1到2距离为3，1到3距离为4，而3到2距离为-2。在Dijkstra算法运算后，1到2、3的距离分别为3和4，而实际上1到2的距离应该为2。尽管在G’中有了1、2后，插入3会重新松弛与3相连的边，但Dijkstra不允许对已经在G’中的结点松弛（如果松弛成功，此前已经确定的最短路径都会发生改变，则算法是错误的）。因此<strong>Dijkstra不能处理存在负权边的图</strong>。</li>
</ul>
<h2 id="SPFA"><a href="#SPFA" class="headerlink" title="SPFA"></a>SPFA</h2><blockquote>
<p>由Bellman-Ford和Dijkstra衍生的Priority Queue-Based Bellman-Ford，国内ACM称为SPFA，与Dijkstra区别在于一个结点能否多次入队。可以处理负权边，适合临接表存储，是Bellman-Ford的优化。又可以看做是BFS的多次入队算法。</p>
</blockquote>
<ul>
<li>Bellman-Ford无论是否已求出最短路径，一定要重复松弛所有边|V|-1次，SPFA将松弛的次数减少。Dijkstra中，一个结点一旦进入了“最短路径子图”就无法再修改其路径和权值，而在SPFA中，并不设置这样一个“写保护”的集合，仅有一个表示最短路径估计的d数组。</li>
<li>算法流程：初始化相同，d[s]=0，设置一个队列，将源点s入队。每次从队中取出一个结点u，并用该结点松弛和其直接相连的所有边，如果发现有一条边（u，v）在松弛操作后更新，则很有可能其它顶点因为d[v]的更新而产生新的最短路径，所以要将v入队。以此循环往复，直到队列为空，整个图没有可以继续松弛的边，则SPFA结束。算法执行时需要设置一个inq数组,inq[v]表示v当前是否在队列中，以防止一个结点在队列中同时出现多次。对于图中存在负权环的情况，可以依据结点入队的次数进行判断。Bellman-Ford对所有边松弛|V|-1次后就能求得最短路径，因此如果某个顶点入队了|V|次，就意味着出现了负权环。</li>
<li>伪代码</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">SPFA</span><span class="params">(G, w, s)</span></span></span><br><span class="line">	<span class="function"><span class="title">INITIALIZE_SINGLE_SOURCE</span><span class="params">(G,s)</span></span></span><br><span class="line">	Queue &lt;- s</span><br><span class="line">	while Queue is not nil:</span><br><span class="line">		u &lt;- Queue</span><br><span class="line">		<span class="keyword">if</span> <span class="function"><span class="title">InQueueCount</span><span class="params">(u)</span></span> &gt; <span class="function"><span class="title">V</span><span class="params">(G)</span></span>:</span><br><span class="line">		   return FALSE</span><br><span class="line">		<span class="keyword">for</span> each vertex v <span class="keyword">in</span> Adj[u]:</span><br><span class="line">			<span class="keyword">if</span> <span class="function"><span class="title">RELAX</span><span class="params">(u, v, w)</span></span> and not inq[v]:</span><br><span class="line">			   Queue &lt;- v</span><br><span class="line">	return TRUE</span><br></pre></td></tr></table></figure>
<h2 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h2><h3 id="Dijkstra算法优化"><a href="#Dijkstra算法优化" class="headerlink" title="Dijkstra算法优化"></a>Dijkstra算法优化</h3><ul>
<li>二叉堆实现的优先队列优化<br>Dijkstra算法每次要从V-G’中选取最短路径估计最短的结点加入G’，因此可以利用优先队列对顶点集V维护，类似Prim的二叉堆维护。可以直接copy最小生成树中Prim的二叉堆部分代码。</li>
<li>斐波那契堆实现的Dijkstra优化  <h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1></li>
</ul>
<h3 id="SPFA算法优化"><a href="#SPFA算法优化" class="headerlink" title="SPFA算法优化"></a>SPFA算法优化</h3><ul>
<li>SLF：Small Label First，假设要加入的结点是j，队首元素为i，若d[j]&lt;d[i]则将j插入队首，否则插入队尾。速度可提升15～20%。</li>
<li>LLL：Large Label Last，假设队首元素为i，队列中的所有结点的d平均值为x，若d[i]&gt;x，则将i插入队尾，查找下一元素，直到找到某一个i使得d[i]&lt;=x，则将i出队进行松弛。SLF+LLL可将效率提升约50%。</li>
<li>SPFA效率不稳定，若无负权边，通常采用Dijkstra。</li>
</ul>
<h1 id="多对顶点间最短路径"><a href="#多对顶点间最短路径" class="headerlink" title="多对顶点间最短路径"></a>多对顶点间最短路径</h1><h2 id="动态规划求解算法"><a href="#动态规划求解算法" class="headerlink" title="动态规划求解算法"></a>动态规划求解算法</h2><ul>
<li>数据的记录：在单源最短路径中我们采用前缀数组pre[i]记录以i为终点的最短路径上的前一个结点，在多对顶点间最短路径问题中，将此数组延伸为二维数组，用pre[i][j]记录从i到j的最短路径上，j的前趋结点。这时打印路径的方法可以用以下伪代码描述。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">PRINT_ALL_PAIRS_SHORTEST_PATH</span><span class="params">( pre, i, j)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="tag">i</span> = j :</span><br><span class="line">	   then print <span class="tag">i</span></span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> pre[i][j] = Nil:</span><br><span class="line">		 then print <span class="string">"No path from"</span> <span class="tag">i</span> <span class="string">"to"</span> j</span><br><span class="line">		 <span class="keyword">else</span> <span class="function"><span class="title">PRINT_ALL_PAIRS_SHORTEST_PATH</span><span class="params">( pre, i, pre[i][j] )</span></span></span><br><span class="line">		 	  print j</span><br></pre></td></tr></table></figure>
<ul>
<li>简要描述设计动态规划算法的步骤<ul>
<li>描述一个最优解的结构</li>
<li>递归定义一个最优解的值</li>
<li>按自底向上的方式计算一个最优解的值</li>
<li>从计算出的信息中构造出一个最优解</li>
</ul>
</li>
<li>具体分析最短路径问题<ul>
<li>最短路径的结构：在单源最短路径中我们已经得到最短路径满足<strong>最优子结构</strong>，即最短路径的所有子路径也是最短路径。</li>
<li>最短路径问题的<strong>状态转移方程</strong>：考虑状态转移方程，首先考虑如何通过变量表示整个递推过程，再用类似数学归纳法给出递推过程，通常用“恰好”和“至多”定义某个可递推的变量。对于i、j之间的最短路径，这条最短路径<strong>至多</strong>包含m条边，用L(i,j,m)表示从i到j，至多包含m条边的任何路径的权值最小值。当m=0时，i = j。因此当i=j时，L(i,j,0) = 0，否则L(i,j,0)=正无穷。对于m非0情况，我们可以发现，至多包含m条边时的最短路径，要么是最多包含m-1条边的最短路径，要么是在m-1条边的最短路径的基础上计算出在m条边下的最短路径（这里用例子说明，假如L(i,j,m)不是L(i,j,m-1)，则一定是走了一条i~&gt;k -&gt; j的路径，根据<strong>最优子结构</strong>，i~&gt;k的路径一定是最短路径，这在推导m-1时已经得到了，因此i~&gt;k的权值L(i,k,m-1)+w(k,j)就是L(i,j,m)。用递归式表达即<code>L(i,j,m) = min{ L(i,k,m-1) + w(k,j) }, k from 1 to n</code>。这个式子包含了L(i,j,m)=L(i,j,m-1)的情况，因为w(j,j)=0。因为图G=(V,E)的任一最短路径至多只能包含|V|-1条边，因此L(i,j,|V|-1)就是任意i到j的最短路径的权值。</li>
<li><strong>自底向上</strong>计算最短路径权值：对于一个给定的临界矩阵W，和一个已经求好的L(k-1)，可以用以下伪代码求出L(k)。</li>
</ul>
</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">EXTEND_SHORTEST_PATHS(<span class="keyword">L</span>,W)</span><br><span class="line">	<span class="keyword">n</span> &lt;- rows(<span class="keyword">L</span>)	# 顶点数目</span><br><span class="line">	let <span class="keyword">L</span>' be <span class="keyword">an</span> <span class="keyword">n</span>×<span class="keyword">n</span> <span class="literal">matrix</span></span><br><span class="line">	<span class="keyword">for</span> i from 1 to <span class="keyword">n</span>:</span><br><span class="line">		<span class="keyword">for</span> j from 1 to <span class="keyword">n</span>:</span><br><span class="line">			<span class="keyword">L</span>'[i][j] = <span class="keyword">INF</span></span><br><span class="line">				<span class="keyword">for</span> k from 1 to <span class="keyword">n</span>:</span><br><span class="line">					<span class="keyword">L</span>'[i][j] = <span class="literal">min</span>( <span class="keyword">L</span>[i][k] + <span class="literal">w</span>(k,j) )</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">L</span>'</span><br></pre></td></tr></table></figure>
<p>因此，可以加上一重循环，求出L(m)。时间复杂度O(V^4)。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">SLOW-ALL-PAIRS-SHORTEST-PATHS</span><span class="params">(W)</span></span></span><br><span class="line">	n &lt;- <span class="function"><span class="title">rows</span><span class="params">(W)</span></span></span><br><span class="line">	Let <span class="function"><span class="title">L</span><span class="params">(<span class="number">1</span>)</span></span> = W</span><br><span class="line">	<span class="keyword">for</span> m from <span class="number">2</span> to n-<span class="number">1</span>:</span><br><span class="line">		<span class="function"><span class="title">L</span><span class="params">(m)</span></span> &lt;- <span class="function"><span class="title">EXTEND-SHORTEST-PATHS</span><span class="params">( L(m-<span class="number">1</span>)</span></span>, W )</span><br><span class="line">	return <span class="function"><span class="title">L</span><span class="params">(m-<span class="number">1</span>)</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>与矩阵乘法相结合：<br>考虑两个矩阵A和B相乘C = A·B，对与i，j=1,2,…,n，计算c(ij) = Sum( a(ik)·b(kj) , k from 1 to n )，记此式为<em>‘。上面给出的递推公式，作如下替换：l(m-1) -&gt; a，w -&gt; b， l(m) -&gt; c， + -&gt; · ， min -&gt; + ，则得到了式</em>‘。因此，EXTEND_SHORTEST_PATHS(A,B)实际返回的是A·B，因此L(1) = L(0)·W， L(2) = L(1)·W = W^2，…，L(n-1) = L(n-2)·W = W^(n-1)。</li>
<li>改进运行时间：对矩阵的乘方作快速幂运算。改进后的时间复杂度为O(V^3·lgV)。</li>
</ul>
<h2 id="Floyd-Warshall"><a href="#Floyd-Warshall" class="headerlink" title="Floyd-Warshall"></a>Floyd-Warshall</h2><ul>
<li>同样是动态规划算法，利用了最短路径结构的另一个特点，不同于基于矩阵乘法算法中的特征。Floyd考虑最短路径上的中间结点，对于一条从u到v的简单路径（不含环）p，中间结点是p上除了u和v之外的其他结点。此算法应用广泛，在群论中用于计算传递闭包，图论中还可用于计算最大流。</li>
<li>Floyd-Warshall算法基于以下最优子结构：将G的V个顶点编号为1,2,3,…,V，任意一对顶点(i,j)，考虑从i到j并且所有中间结点都属于集合{1,2,3,…,k}的路径，并设p是这些路径中的最短路径，则可推导出“从i到j并且所有中间结点都属于集合{1,2,3,…,k,k+1}的最短路径p’”。推导过程如下：假设顶点k+1不是路径p’的中间结点，则p’的所有中间结点都在集合{1,2,3,…,k}中，因此p’=p。假设顶点k+1是路径p’的中间结点，则可将p’分解为i~&gt;k+1, k+1~&gt;j，分别记为p1和p2，根据最短路径最优子结构，p1和p2分别是从i到k+1和从k+1到j的最短路径，p1和p2的中间结点均属于{1,2,3,…,k}。</li>
<li>递归解：记D(i,j,k)为上述的p的权值，则k=0时有D(i,j,k) = w(i,j)，k非0时有D(i,j,k) = min{ D(i,j,k-1), d(i,k,k-1) + d(k,j,k-1) }。根据该方程，我们知道D(i,j,k)的值从D(i,j,k-1)推出，因此<strong>D(i,j,k-1)必须在D(i,j,k)之前计算</strong>。因此将k放在伪代码的最外层循环。伪代码如下。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">FLOYD-WARSHALL</span><span class="params">(W)</span></span></span><br><span class="line">	n &lt;- <span class="function"><span class="title">rows</span><span class="params">(W)</span></span></span><br><span class="line">	<span class="function"><span class="title">D</span><span class="params">(<span class="number">0</span>)</span></span> &lt;- W</span><br><span class="line">	<span class="keyword">for</span> k from <span class="number">1</span> to n:</span><br><span class="line">		<span class="keyword">for</span> <span class="tag">i</span> from <span class="number">1</span> to n:</span><br><span class="line">			<span class="keyword">for</span> j from <span class="number">1</span> to n:</span><br><span class="line">				<span class="function"><span class="title">D</span><span class="params">(i,j,k)</span></span> = min ( <span class="function"><span class="title">D</span><span class="params">(i,j,k-<span class="number">1</span>)</span></span> , <span class="function"><span class="title">D</span><span class="params">(i,k,k-<span class="number">1</span>)</span></span>+<span class="function"><span class="title">D</span><span class="params">(k,j,k-<span class="number">1</span>)</span></span> )</span><br><span class="line">	return <span class="function"><span class="title">D</span><span class="params">(n)</span></span></span><br></pre></td></tr></table></figure>
<h1 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h1><h2 id="Dijkstra-堆优化"><a href="#Dijkstra-堆优化" class="headerlink" title="Dijkstra+堆优化"></a>Dijkstra+堆优化</h2><h2 id="SPFA-SLF-LLL"><a href="#SPFA-SLF-LLL" class="headerlink" title="SPFA+SLF+LLL"></a>SPFA+SLF+LLL</h2><h2 id="Floyd-Warshall-1"><a href="#Floyd-Warshall-1" class="headerlink" title="Floyd-Warshall"></a>Floyd-Warshall</h2><hr>
<p>原创作品，允许转载，转载时无需告知，但请务必以超链接形式标明文章<a href="https://forec.github.io/2015/12/23/Graph-Algorithms5/">原始出处</a>(<a href="https://forec.github.io/2015/12/23/Graph-Algorithms5/">https://forec.github.io/2015/12/23/Graph-Algorithms5/</a>) 、作者信息（<a href="https://forec.github.io/">Forec</a>）和本声明。</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://forec.github.io/2015/12/23/Graph-Algorithms5/" data-id="civwg2149006yacewu7bkqi9r" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div class="ds-thread" data-thread-key="2015/12/23/Graph-Algorithms5/" data-title="最短路径" data-url="http://forec.github.io/2015/12/23/Graph-Algorithms5/"></div>
    <style>
        #ds-thread #ds-reset .ds-textarea-wrapper {
            background: none;
        }
        #ds-reset .ds-avatar img {
            box-shadow: none;
        }
        #ds-reset .ds-gradient-bg {
            background: #f7f7f7;
        }
        #ds-thread #ds-reset li.ds-tab a {
            border-radius: 3px;
        }
        #ds-thread #ds-reset .ds-post-button {
            color: white;
            border: none;
            box-shadow: none;
            background: #d32;
            text-shadow: none;
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }
        #ds-thread #ds-reset .ds-post-button:hover {
            color: white;
            background: #DE594C;
        }
        #ds-thread #ds-reset .ds-post-button:active {
            background: #d32;
        }
        #ds-smilies-tooltip ul.ds-smilies-tabs li a.ds-current {
            color: white;
            background: #d32;
            box-shadow: none;
            text-shadow: none;
            font-weight: normal;
        }
    </style>

    
    </section>

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/Forec" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="google-plus-circle" href="https://plus.google.com/u/0/103559279723380829001" target="_blank">
                        <i class="icon fa fa-google-plus-circle"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="https://www.facebook.com/MrForec" target="_blank">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="https://twitter.com/MrForec" target="_blank">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/atom.xml" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="mail-forward" href="mailto:forec@bupt.edu.cn" target="_blank">
                        <i class="icon fa fa-mail-forward"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2015/12/24/Graph-Algorithms6/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            差分约束系统
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2015/11/14/Computer-Organization-Architecture6/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">计组与体系结构笔记（六）</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/24/os-concepts-7/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-7.jpg)" alt="操作系统（七）：死锁" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/24/os-concepts-7/" class="title">操作系统（七）：死锁</a></p>
                            <p class="item-date"><time datetime="2016-11-24T14:16:22.000Z" itemprop="datePublished">2016-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/24/os-concepts-6/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-6.jpg)" alt="操作系统（六）：管程（Monitor）" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/24/os-concepts-6/" class="title">操作系统（六）：管程（Monitor）</a></p>
                            <p class="item-date"><time datetime="2016-11-24T12:47:03.000Z" itemprop="datePublished">2016-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/24/os-concepts-5/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-5.jpg)" alt="操作系统（五）：进程同步" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/24/os-concepts-5/" class="title">操作系统（五）：进程同步</a></p>
                            <p class="item-date"><time datetime="2016-11-24T10:41:33.000Z" itemprop="datePublished">2016-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/24/os-concepts-4/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-4.jpg)" alt="操作系统（四）：进程互斥" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/24/os-concepts-4/" class="title">操作系统（四）：进程互斥</a></p>
                            <p class="item-date"><time datetime="2016-11-24T07:29:44.000Z" itemprop="datePublished">2016-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/23/os-concepts-3/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-3.jpg)" alt="操作系统（三）：CPU 调度" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/23/os-concepts-3/" class="title">操作系统（三）：CPU 调度</a></p>
                            <p class="item-date"><time datetime="2016-11-23T13:49:05.000Z" itemprop="datePublished">2016-11-23</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Code/">Code</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Configuration/">Configuration</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Language/">Language</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/大数据/">大数据</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机理论基础/">计算机理论基础</a><span class="category-list-count">13</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Access/" style="font-size: 10px;">Access</a> <a href="/tags/Algorithms/" style="font-size: 20px;">Algorithms</a> <a href="/tags/CVM/" style="font-size: 10px;">CVM</a> <a href="/tags/Data-Structures/" style="font-size: 12.22px;">Data-Structures</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Emacs/" style="font-size: 10px;">Emacs</a> <a href="/tags/Golang/" style="font-size: 16.67px;">Golang</a> <a href="/tags/Hadoop/" style="font-size: 11.11px;">Hadoop</a> <a href="/tags/Haskell/" style="font-size: 13.33px;">Haskell</a> <a href="/tags/Mistakes/" style="font-size: 13.33px;">Mistakes</a> <a href="/tags/OS/" style="font-size: 18.89px;">OS</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Qt/" style="font-size: 10px;">Qt</a> <a href="/tags/Raspberry/" style="font-size: 10px;">Raspberry</a> <a href="/tags/Safety/" style="font-size: 10px;">Safety</a> <a href="/tags/Spark/" style="font-size: 10px;">Spark</a> <a href="/tags/sicp/" style="font-size: 11.11px;">sicp</a> <a href="/tags/云存储/" style="font-size: 15.56px;">云存储</a> <a href="/tags/函数式编程/" style="font-size: 14.44px;">函数式编程</a> <a href="/tags/图分割/" style="font-size: 11.11px;">图分割</a> <a href="/tags/字符编码/" style="font-size: 11.11px;">字符编码</a> <a href="/tags/机器学习/" style="font-size: 18.89px;">机器学习</a> <a href="/tags/线程/" style="font-size: 17.78px;">线程</a> <a href="/tags/计组与体系结构/" style="font-size: 14.44px;">计组与体系结构</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://forec.cn">Forec的官方网站</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2016 Forec</p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'forec# enter duoshuo shortname here'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js" type="text/javascript"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js" type="text/javascript"></script>

    </div>
</body>
</html>
