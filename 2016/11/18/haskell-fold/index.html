<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Haskell 的 fold 系列 | Forec&#39;s Notes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="Haskell,sicp,函数式编程" />
    
    <meta name="description" content="分析 Haskell 中 fold 系列函数。">
<meta property="og:type" content="article">
<meta property="og:title" content="Haskell 的 fold 系列">
<meta property="og:url" content="http://forec.github.io/2016/11/18/haskell-fold/index.html">
<meta property="og:site_name" content="Forec's Notes">
<meta property="og:description" content="分析 Haskell 中 fold 系列函数。">
<meta property="og:image" content="http://7xktmz.com1.z0.glb.clouddn.com/haskell-fold.jpg">
<meta property="og:updated_time" content="2016-11-18T12:20:43.820Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Haskell 的 fold 系列">
<meta name="twitter:description" content="分析 Haskell 中 fold 系列函数。">
    

    
        <link rel="alternate" href="/atom.xml" title="Forec&#39;s Notes" type="application/atom+xml" />
    

    
        <link rel="icon" href="http://7xktmz.com1.z0.glb.clouddn.com/sitefavicon.png# path to favicon" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css" type="text/css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css" type="text/css">

    <link rel="stylesheet" href="/css/style.css" type="text/css">

    <script src="/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css" type="text/css">
    
    
    

</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">关于我</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/columns/index.html">专栏</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/projects/index.html">个人项目列表</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="http://forec.cn">FOREC 的官方网站</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js" type="text/javascript"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Language/">Language</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-haskell-fold" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Haskell 的 fold 系列
        </h1>
    

            </header>
        
        
            <div class="article-subtitle">
                <a href="/2016/11/18/haskell-fold/" class="article-date">
    <time datetime="2016-11-18T07:10:11.000Z" itemprop="datePublished">2016-11-18</time>
</a>
                
    <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Haskell/">Haskell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sicp/">sicp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/函数式编程/">函数式编程</a></li></ul>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <blockquote>
<p>分析 Haskell 中 <code>fold</code> 系列函数。</p>
</blockquote>
<a id="more"></a>
<p>一年前刚接触 Haskell 时，以及半年前学习 sicp 时，<code>fold</code> 之间的转化和区别就曾让我纠结过一段时间。现在重新来看，有些概念还是模糊。所以把主要的区别记录下来以供日后查阅。</p>
<p>相关链接： </p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Fold_\(higher-order_function\" target="_blank" rel="external">Wikipedia上关于 fold 的解释</a>)：包含了最基本的解释和形象的图示</li>
<li><a href="https://wiki.haskell.org/Foldr_Foldl_Foldl&#39;" target="_blank" rel="external">Haskell Wiki上对 fold 系列函数的解释</a>：包含了对 <code>foldl</code>、<code>foldr</code>和<code>foldl&#39;</code> 的对比、分析，下面使用的例子即从此而来</li>
<li><a href="https://wiki.haskell.org/Foldl_as_foldr" target="_blank" rel="external">Haskell Wiki上 foldl 和 foldr 之间的转换</a>：包含了 <code>foldl</code> 和 <code>foldr</code> 之间转换的理解、应用</li>
</ul>
<p><code>Data.Foldable</code> 中的 <code>foldl</code> 和 <code>foldr</code> 均为非严格求值（惰性求值），最明显的差别在折叠方向不同，一个从左到右，一个从右到左。其次，<code>foldl</code> 的形式是尾递归，而 <code>foldr</code> 则需要在每折叠一个元素时在栈中重新开辟一块空间以进入下一层次的递归。因此 <code>foldl</code> 较 <code>foldr</code> 效率更高，但二者处理的列表长度均有限制（如果求值中不出现短路的情况）。</p>
<h1 id="无限长列表处理"><a href="#无限长列表处理" class="headerlink" title="无限长列表处理"></a>无限长列表处理</h1><p>另一个显式的不同在于，<code>foldr</code> 能够处理无限列表，这是因为 <code>foldr</code> 在展开过程中可能出现表达式短路，例如下面的例子中，<code>foldr</code> 使用初值 <code>True</code> 对一个无限长的、元素均为 <code>False</code> 的列表求与，将立刻得到 <code>False</code>，因为其展开式为 <code>a0 &amp;&amp; (a1 &amp;&amp; ( ... &amp;&amp; (a. &amp;&amp; True)))</code>，虽然整个列表展开式是无穷的，但因为最外层 <code>&amp;&amp;</code> 表达式的第一个操作数是 <code>False</code>，与操作表达式短路，因此运算随之结束。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldr</span> (&amp;&amp;) <span class="type">True</span> (repeat <span class="type">False</span>)</span><br><span class="line"><span class="type">False</span> &amp;&amp; (<span class="type">False</span> &amp;&amp; (<span class="type">False</span> &amp;&amp; (... &amp;&amp; (<span class="type">False</span> &amp;&amp; <span class="type">True</span>) ... )))</span><br></pre></td></tr></table></figure>
<p>而使用 <code>foldl</code> 时，其展开过程如下。整个展开式无穷，而最外层的 <code>&amp;&amp;</code> 表达式的第一个操作数是一个子式，也是一个无穷的展开式，要求 <code>foldl</code> 表达式结果必须先求得子式的值，这个过程将永不会结束，也无法利用短路特性。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldl</span> (&amp;&amp;) <span class="type">True</span> (repeat <span class="type">False</span>)</span><br><span class="line">((...(<span class="type">True</span> &amp;&amp; <span class="type">False</span>) &amp;&amp; <span class="type">False</span>) &amp;&amp; ...)</span><br></pre></td></tr></table></figure>
<p>所以，<code>foldr</code> 能够处理无限长列表的原因在于，它从右向左折叠，展开式方向从左向右，所以<strong>能够利用某些表达式的短路特性</strong>。</p>
<h1 id="二者处理长列表对比"><a href="#二者处理长列表对比" class="headerlink" title="二者处理长列表对比"></a>二者处理长列表对比</h1><p>在折叠操作无短路特性的情况下，两者处理的列表长度均有限。尽管 <code>foldl</code> 采取了尾递归，但由于 Haskell 默认使用惰性求值，所以和 <code>foldr</code> 一样，都会产生 <code>*** Exception: stack overflow</code>。</p>
<p>下面的例子来自上面的 Haskell Wiki。</p>
<p><code>foldr</code> 处理 <code>foldr (+) 0 [1..1000000]</code> 的过程展开如下。因为 <code>(+)</code> 是严格求值符号，所以符号两边的参数都要求出才能对表达式求值。在例子中，要求 <code>1 + (2 + (3 + (4 + (...))))</code>，则： 1 被入栈，并对 <code>2 + (3 + (4 + (...)))</code> 求值； 2 被入栈，并对 <code>3 + (4 + (...))</code> 求值； 3 被入栈，并对 <code>4 + (...)</code> 求值。当列表长度足够大时，栈满将引发栈溢出异常。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldr</span> (+) <span class="number">0</span> [<span class="number">1.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (foldr (+) <span class="number">0</span> [<span class="number">2.</span><span class="number">.1000000</span>]) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (foldr (+) <span class="number">0</span> [<span class="number">3.</span><span class="number">.1000000</span>])) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + (foldr (+) <span class="number">0</span> [<span class="number">4.</span><span class="number">.1000000</span>]))) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + (<span class="number">4</span> + (foldr (+) <span class="number">0</span> [<span class="number">5.</span><span class="number">.1000000</span>])))) <span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">-- ...</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + (<span class="number">4</span> + (... + (<span class="number">999999</span> + (foldr (+) <span class="number">0</span> [<span class="number">1000000</span>]))...)))) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + (<span class="number">4</span> + (... + (<span class="number">999999</span> + (<span class="number">1000000</span> + ((foldr (+) <span class="number">0</span> []))))...)))) <span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">-- ...</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + (<span class="number">4</span> + (... + (<span class="number">999999</span> + (<span class="number">1000000</span> + <span class="number">0</span>))...)))) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + (<span class="number">4</span> + (... + (<span class="number">999999</span> + <span class="number">1000000</span>)...)))) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + (<span class="number">4</span> + (... + <span class="number">1999999</span> ...)))) <span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">-- ...</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + (<span class="number">4</span> + <span class="number">500000499990</span>))) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + (<span class="number">3</span> + <span class="number">500000499994</span>)) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + (<span class="number">2</span> + <span class="number">500000499997</span>) <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">1</span> + <span class="number">500000499999</span> <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">500000500000</span></span><br></pre></td></tr></table></figure>
<p>同样的表达式，用 <code>foldl</code> 解释过程如下（使用 <code>foldl</code> 尝试可能导致操作系统异常），因为 <code>(+)</code> 符号产生的整个表达式仍然不可约（即不具有短路特性，必须将最后一个元素计算后才可得出结果），所以仍然要展开整个列表。整个解释过程分三部分：  </p>
<ul>
<li>第一部分是尾递归，因为 Haskell 的惰性求值，<code>foldl f z (x:xs)</code> 引出的 <code>foldl f (f z x) xs</code> 式中，<code>f z x</code> 不会被立刻求值，而是以 <code>let</code> 方式在堆中分配一块空间存储，而堆的空间取决于所使用机器的内存，如果列表足够长，可能在这一部分就会导致程序的崩溃，因为这部分的工作就是向堆中写入大量 <code>let</code> 产生的数据，这些数据会占用大量的内存。</li>
<li>假设上一步成功执行，则堆中将充斥着 <code>let</code> 绑定，它们的数量和列表长度相同。在下面的例子中，表达式只剩下 <code>z1000000</code>。而要求 <code>z1000000</code>，必须求 <code>z1000000 = z999999 + 1000000</code> 中的 <code>z999999</code>。所以 <code>1000000</code> 入栈，并开始对 <code>z999999</code> 求值；之后 <code>999999</code> 入栈，并对 <code>z999998</code> 求值，以此类推。这一步和 <code>foldr</code> 的展开类似，只是列表展开方向上 <code>foldl</code> 从右到左，当列表长度足够长时，这一步将导致栈溢出，这也是为什么 <code>foldl</code> 对长列表做严格求值运算时，会产生 <code>*** Exception: stack overflow</code> 异常的原因，通常堆的空间足够大，第一步能够成功执行，而在此步，<code>foldl</code> 和 <code>foldr</code> 面临同样的困境。</li>
<li>假设上一步成功执行，剩下的操作就是不断地出栈、求值。</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldl</span> (+) <span class="number">0</span> [<span class="number">1.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line"><span class="title">in</span> foldl (+) z1 [<span class="number">2.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line"><span class="title">in</span> foldl (+) z2 [<span class="number">3.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line">    z3 = z2 + <span class="number">3</span></span><br><span class="line"><span class="title">in</span> foldl (+) z3 [<span class="number">4.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- ... after many foldl steps ...</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line">    z3 = z2 + <span class="number">3</span></span><br><span class="line">    z4 = z3 + <span class="number">4</span></span><br><span class="line">    ...</span><br><span class="line">    z999997 = z999996 + <span class="number">999997</span></span><br><span class="line">    z999998 = z999997 + <span class="number">999998</span></span><br><span class="line">    z999999 = z999998 + <span class="number">999999</span></span><br><span class="line"><span class="title">in</span> foldl (+) z999999 [<span class="number">1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line">    z3 = z2 + <span class="number">3</span></span><br><span class="line">    z4 = z3 + <span class="number">4</span></span><br><span class="line">    ...</span><br><span class="line">    z999997 = z999996 + <span class="number">999997</span></span><br><span class="line">    z999998 = z999997 + <span class="number">999998</span></span><br><span class="line">    z999999 = z999998 + <span class="number">999999</span></span><br><span class="line">    z100000 = z999999 + <span class="number">1000000</span></span><br><span class="line"><span class="title">in</span> foldl (+) z1000000 [] <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line">    z3 = z2 + <span class="number">3</span></span><br><span class="line">    z4 = z3 + <span class="number">4</span></span><br><span class="line">    ...</span><br><span class="line">    z999997 = z999996 + <span class="number">999997</span></span><br><span class="line">    z999998 = z999997 + <span class="number">999998</span></span><br><span class="line">    z999999 = z999998 + <span class="number">999999</span></span><br><span class="line">    z100000 = z999999 + <span class="number">1000000</span></span><br><span class="line"><span class="title">in</span> z1000000 <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- Now a large chain of +'s will be created:</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line">    z3 = z2 + <span class="number">3</span></span><br><span class="line">    z4 = z3 + <span class="number">4</span></span><br><span class="line">    ...</span><br><span class="line">    z999997 = z999996 + <span class="number">999997</span></span><br><span class="line">    z999998 = z999997 + <span class="number">999998</span></span><br><span class="line">    z999999 = z999998 + <span class="number">999999</span></span><br><span class="line"><span class="title">in</span> z999999 + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line">    z3 = z2 + <span class="number">3</span></span><br><span class="line">    z4 = z3 + <span class="number">4</span></span><br><span class="line">    ...</span><br><span class="line">    z999997 = z999996 + <span class="number">999997</span></span><br><span class="line">    z999998 = z999997 + <span class="number">999998</span></span><br><span class="line"><span class="title">in</span>  (z999998 + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line">    z3 = z2 + <span class="number">3</span></span><br><span class="line">    z4 = z3 + <span class="number">4</span></span><br><span class="line">    ...</span><br><span class="line"><span class="title">in</span>  (((z999996 + <span class="number">999997</span>) + <span class="number">999998</span>) + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- ...</span></span><br><span class="line"></span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line">    z3 = z2 + <span class="number">3</span></span><br><span class="line"><span class="title">in</span>  ((((((z3 + <span class="number">4</span>) + <span class="number">5</span>) + ...) + <span class="number">999997</span>) + <span class="number">999998</span>) + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line">    z2 = z1 + <span class="number">2</span></span><br><span class="line"><span class="title">in</span>  (((((((z2 + <span class="number">3</span>) + <span class="number">4</span>) + <span class="number">5</span>) + ...) + <span class="number">999997</span>) + <span class="number">999998</span>) + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="title">let</span> z1 =  <span class="number">0</span> + <span class="number">1</span></span><br><span class="line"><span class="title">in</span>  ((((((((z1 + <span class="number">2</span>) + <span class="number">3</span>) + <span class="number">4</span>) + <span class="number">5</span>) + ...) + <span class="number">999997</span>) + <span class="number">999998</span>) + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"> </span><br><span class="line">(((((((((<span class="number">0</span> + <span class="number">1</span>) + <span class="number">2</span>) + <span class="number">3</span>) + <span class="number">4</span>) + <span class="number">5</span>) + ...) + <span class="number">999997</span>) + <span class="number">999998</span>) + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Now we can actually start reducing:</span></span><br><span class="line"></span><br><span class="line">((((((((<span class="number">1</span> + <span class="number">2</span>) + <span class="number">3</span>) + <span class="number">4</span>) + <span class="number">5</span>) + ...) + <span class="number">999997</span>) + <span class="number">999998</span>) + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line">(((((((<span class="number">3</span> + <span class="number">3</span>) + <span class="number">4</span>) + <span class="number">5</span>) + ...) + <span class="number">999997</span>) + <span class="number">999998</span>) + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line">...</span><br><span class="line">(<span class="number">499998500001</span> + <span class="number">999999</span>) + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">499999500000</span> + <span class="number">1000000</span> <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">500000500000</span></span><br></pre></td></tr></table></figure>
<p>由此可见，二者能够处理的列表长度其实相同，主要受栈空间的限制。<code>foldr</code> 受栈空间限制的原因是它本身并不采用尾递归，而 <code>foldl</code> 尽管使用了尾递归的形式，但因为惰性求值的特性：表达式仅在真正需要它们的值的时候才会被计算，故形式上的尾递归并没有真正起作用。所以 <code>foldr</code> 的限制是无法解除的，但 <code>foldl</code> 只要摒弃惰性求值，就可以摆脱限制，从形式上的尾递归变成真实意义上的尾递归。</p>
<p>另外，我们还能看出， <strong><code>foldl</code> 隐含了堆列表做一个逆序操作，而 <code>foldr</code> 则保持了列表的顺序</strong> 。</p>
<p><strong>这两者因为效率低下，在生产代码中均不会出现。</strong></p>
<h1 id="Foldl’"><a href="#Foldl’" class="headerlink" title="Foldl’"></a>Foldl’</h1><p>使用 <code>seq</code> 可以使表达式被立刻求值。<code>foldl&#39;</code> 的定义如下，每次进入尾递归前都要计算出参数 <code>z&#39;</code> 的值，而不是将表达式的绑定入堆，之后再入栈、出栈。生产代码中只会出现 <code>foldl&#39;</code>。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldl'</span> f z []     = z</span><br><span class="line"><span class="title">foldl'</span> f z (x:xs) = <span class="keyword">let</span> z' = z `f` x </span><br><span class="line">                    <span class="keyword">in</span> seq z' $ foldl' f z' xs</span><br></pre></td></tr></table></figure>
<p>现在上面例子的计算过程如下，运算将不会导致栈溢出。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldl'</span> (+) <span class="number">0</span> [<span class="number">1.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"><span class="title">foldl'</span> (+) <span class="number">1</span> [<span class="number">2.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"><span class="title">foldl'</span> (+) <span class="number">3</span> [<span class="number">3.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"><span class="title">foldl'</span> (+) <span class="number">6</span> [<span class="number">4.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"><span class="title">foldl'</span> (+) <span class="number">10</span> [<span class="number">5.</span><span class="number">.1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">-- ...</span></span><br><span class="line"><span class="title">foldl'</span> (+) <span class="number">499999500000</span> [<span class="number">1000000</span>] <span class="comment">--&gt;</span></span><br><span class="line"><span class="title">foldl'</span> (+) <span class="number">500000500000</span> [] <span class="comment">--&gt;</span></span><br><span class="line"><span class="number">500000500000</span></span><br></pre></td></tr></table></figure>
<p>通常，我们会在 <code>foldr</code> 和 <code>foldl&#39;</code> 之间选择。</p>
<p>但使用 <code>foldl&#39;</code> 也存在缺陷，考虑下面的例子，<code>foldl</code> 将返回 0（<code>foldr</code> 也一样），而 <code>foldl&#39;</code> 将产生一个 <code>undifined</code> 错误。这是因为 <code>(*)</code> 具有短路特性，如果 <code>(*)</code> 符号右侧的子式为 0 ，则左式不必计算。在 <code>foldl</code> 中，最终展开式为 <code>((((1 * 2) * 3) * undefined) * 5) * 0</code>，直接求出结果为 0；在 <code>foldr</code> 中，最终展开式为 <code>2 * (3 * (undifined * (5 * (0 * 1))))</code>，可以看出，首先 <code>5 * (0 * 1)</code> 计算出　0，之后变为 <code>2 * (3 * (undifined * 0))</code>，此时短路，因此求出 0。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldl</span> (*) <span class="number">1</span> [<span class="number">2</span>,<span class="number">3</span>,undefined,<span class="number">5</span>,<span class="number">0</span>]</span><br><span class="line"><span class="title">foldl'</span> (*) <span class="number">1</span> [<span class="number">2</span>,<span class="number">3</span>,undefined,<span class="number">5</span>,<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h1 id="Foldr-和-Foldl-的转化"><a href="#Foldr-和-Foldl-的转化" class="headerlink" title="Foldr 和 Foldl 的转化"></a>Foldr 和 Foldl 的转化</h1><p><code>foldl</code> 和 <code>foldr</code> 可以互相表示。</p>
<p>用 <code>foldr</code> 表示 <code>foldl</code> 如下。这个转化其实并不完全正确，因为 <code>foldr</code> 可以处理无穷列表，而 <code>foldl</code> 本身并不具有这一特性。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldl''</span> :: (a -&gt; b -&gt; a) -&gt; a -&gt; [b] -&gt; a</span><br><span class="line"><span class="title">foldl''</span> f z xs = foldr step id xs z</span><br><span class="line">    <span class="keyword">where</span> step x g acc = g (f acc x)</span><br></pre></td></tr></table></figure>
<p>类似的，用 <code>foldl</code> 表示 <code>foldr</code> 如下。</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldr''</span> :: (b -&gt; a -&gt; a) -&gt; a -&gt; [b] -&gt; a</span><br><span class="line"><span class="title">foldr''</span> f z xs = foldl step id xs z</span><br><span class="line">    <span class="keyword">where</span> step g acc x = g (f acc x)</span><br></pre></td></tr></table></figure>
<p>这里我将试图把自己的理解表述出来：</p>
<p>以 <code>foldr</code> 表示 <code>foldl</code> 为例。<code>foldr</code> 看上去似乎接收了四个参数，但经过部分施用，<code>foldr step id xs</code> 实际产生了一个类型签名为 <code>a -&gt; a</code> 的结果，这里的 <code>a</code> 即为 <code>foldl</code> 传入的零值 <code>z</code> 的类型。因此 <code>foldr</code> 的作用即是产生了这样一个函数，这个函数的格式类似上面例子中的 <code>1 + (2 + (3 + (4 + (... + (999999 + (1000000 + 0))...))))</code>，但它接收一个参数，这个参数就是式中的 <code>0</code>，即它接收传入的零值 <code>z</code>，返回对这个零值作用的结果。</p>
<p>下面观察函数是如何产生的。<code>step</code> 作为折叠函数，接收三个参数，参数 <code>x</code> 是剩余列表的最后一个元素（因为是 <code>foldr</code>，方向从右向左），参数 <code>acc</code> 是累积值。我们知道 <code>foldr</code> 中的折叠函数实际只接收两个参数，因此 <code>step</code> 是一个部分施用的函数。观察 <code>step</code> 的类型签名，因为在 <code>foldr</code> 中，它接受一个函数 <code>id</code> 作为零值，所以它的类型是 <code>a -&gt; (b -&gt; b) -&gt; (b -&gt; b)</code>。因为 <code>step</code> 每次只能获得两个参数（剩余列表中的最后一个值和 <code>acc</code>），所以它将返回一个 <code>(b -&gt; b)</code> 作为下一次的 <code>acc</code>。</p>
<p>用一个例子演示 <code>foldr</code> 具体的展开过程。考虑 <code>foldl&#39;&#39; f zero [a1, a2, a3]</code>，这里 <code>foldl&#39;&#39;</code> 是用 <code>foldr</code> 表示的 <code>foldl</code>。其展开过程如下：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldl''</span> f zero [a1, a2, a3]</span><br><span class="line">= (foldr step id [a1, a2, a3]) zero</span><br><span class="line">= (step a1 (step a2 (step a3 id))) zero</span><br><span class="line">= (step a1 (step a2 (\z -&gt; id (f z a3)))) zero</span><br><span class="line">= (step a1 (\y -&gt; (\z -&gt; id (f z a3)) (f y a2))) zero</span><br><span class="line">= (\x -&gt; (\y -&gt; (\z -&gt; id (f z a3)) (f y a2)) (f x a1)) zero</span><br><span class="line">= (\x -&gt; (\y -&gt; (\z -&gt; f z a3) (f y a2)) (f x a1)) zero</span><br><span class="line">= (\x -&gt; (\y -&gt; f (f y a2) a3) (f x a1)) zero</span><br><span class="line">= (\x -&gt; f (f (f x a1) a2) a3) zero</span><br><span class="line">= f (f (f zero a1) a2) a3</span><br></pre></td></tr></table></figure>
<p>在上面的展开过程中，首先按 <code>foldr</code> 过程展开成一系列 <code>step</code> 的叠加，之后从内向外逐步嵌套，成为一系列 <code>foldl</code> 传入的折叠函数 <code>f</code> 的组合：这个组合要计算的第一个直接子式（无需经过入栈、出栈即可计算出结果）接收 <code>foldl</code> 传入的零值 <code>zero</code>。</p>
<p>同理，可以写出用 <code>foldl</code> 实现 <code>foldr&#39;&#39;</code> 具体的展开过程，仍以 <code>foldr&#39;&#39; f zero [a1, a2, a3]</code> 为例，其展开过程如下：</p>
<p>foldr’’ f z xs = foldl step id xs z<br>    where step g acc x = g (f acc x)</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">foldr''</span> f zero [a1, a2, a3]</span><br><span class="line">= (foldl step id [a1, a2, a3]) zero</span><br><span class="line">= (step (step (step id a1) a2) a3) zero</span><br><span class="line">= (step (step (\z -&gt; id (f z a1)) a2) a3) zero</span><br><span class="line">= (step (\y -&gt; (\z -&gt; id (f z a1)) (f y a2)) a3) zero</span><br><span class="line">= (\x -&gt; (\y -&gt; (\z -&gt;id (f z a1)) (f y a2)) (f x z3)) zero</span><br><span class="line">= (\x -&gt; (\y -&gt; f (f y a2) a1) (f x a3)) zero</span><br><span class="line">= (\x -&gt; f (f (f x a3) a2) a1) zero</span><br><span class="line">= f (f (f zero a3) a2) a1</span><br></pre></td></tr></table></figure>
<p>尽管二者可以互相表示，但仅仅是显式形式上的，其它隐式的性质仍然是形式所无法表征的。</p>
<hr>
<p>原创作品，允许转载，转载时无需告知，但请务必以超链接形式标明文章<a href="http://blog.forec.cn/2016/11/18/haskell-fold/" target="_blank" rel="external">原始出处</a>(<a href="http://blog.forec.cn/2016/11/18/haskell-fold/" target="_blank" rel="external">http://blog.forec.cn/2016/11/18/haskell-fold/</a>) 、作者信息（<a href="http://forec.cn/" target="_blank" rel="external">Forec</a>）和本声明。</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://forec.github.io/2016/11/18/haskell-fold/" data-id="civwgp9hg0040r8ewt3kgr4m9" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div class="ds-thread" data-thread-key="2016/11/18/haskell-fold/" data-title="Haskell 的 fold 系列" data-url="http://forec.github.io/2016/11/18/haskell-fold/"></div>
    <style>
        #ds-thread #ds-reset .ds-textarea-wrapper {
            background: none;
        }
        #ds-reset .ds-avatar img {
            box-shadow: none;
        }
        #ds-reset .ds-gradient-bg {
            background: #f7f7f7;
        }
        #ds-thread #ds-reset li.ds-tab a {
            border-radius: 3px;
        }
        #ds-thread #ds-reset .ds-post-button {
            color: white;
            border: none;
            box-shadow: none;
            background: #d32;
            text-shadow: none;
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }
        #ds-thread #ds-reset .ds-post-button:hover {
            color: white;
            background: #DE594C;
        }
        #ds-thread #ds-reset .ds-post-button:active {
            background: #d32;
        }
        #ds-smilies-tooltip ul.ds-smilies-tabs li a.ds-current {
            color: white;
            background: #d32;
            box-shadow: none;
            text-shadow: none;
            font-weight: normal;
        }
    </style>

    
    </section>

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/Forec" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="google-plus-circle" href="https://plus.google.com/u/0/103559279723380829001" target="_blank">
                        <i class="icon fa fa-google-plus-circle"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="https://www.facebook.com/MrForec" target="_blank">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="https://twitter.com/MrForec" target="_blank">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/atom.xml" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="mail-forward" href="mailto:forec@bupt.edu.cn" target="_blank">
                        <i class="icon fa fa-mail-forward"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2016/11/19/cloud-storage-system-5/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            简易云存储系统用户结构设计
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2016/11/17/haskell-graham/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">Haskell 的葛立恒扫描法</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/24/os-concepts-7/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-7.jpg)" alt="操作系统（七）：死锁" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/24/os-concepts-7/" class="title">操作系统（七）：死锁</a></p>
                            <p class="item-date"><time datetime="2016-11-24T14:16:22.000Z" itemprop="datePublished">2016-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/24/os-concepts-6/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-6-r.jpg)" alt="操作系统（六）：管程（Monitor）" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/24/os-concepts-6/" class="title">操作系统（六）：管程（Monitor）</a></p>
                            <p class="item-date"><time datetime="2016-11-24T12:47:03.000Z" itemprop="datePublished">2016-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/24/os-concepts-5/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-5-r.jpg)" alt="操作系统（五）：进程同步" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/24/os-concepts-5/" class="title">操作系统（五）：进程同步</a></p>
                            <p class="item-date"><time datetime="2016-11-24T10:41:33.000Z" itemprop="datePublished">2016-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/24/os-concepts-4/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-4.jpg)" alt="操作系统（四）：进程互斥" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/24/os-concepts-4/" class="title">操作系统（四）：进程互斥</a></p>
                            <p class="item-date"><time datetime="2016-11-24T07:29:44.000Z" itemprop="datePublished">2016-11-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/11/23/os-concepts-3/" class="thumbnail">
    
    
        <span style="background-image:url(http://7xktmz.com1.z0.glb.clouddn.com/os-concepts-3.jpg)" alt="操作系统（三）：CPU 调度" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/计算机理论基础/">计算机理论基础</a></p>
                            <p class="item-title"><a href="/2016/11/23/os-concepts-3/" class="title">操作系统（三）：CPU 调度</a></p>
                            <p class="item-date"><time datetime="2016-11-23T13:49:05.000Z" itemprop="datePublished">2016-11-23</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Code/">Code</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Configuration/">Configuration</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Language/">Language</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/大数据/">大数据</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机理论基础/">计算机理论基础</a><span class="category-list-count">13</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Access/" style="font-size: 10px;">Access</a> <a href="/tags/Algorithms/" style="font-size: 20px;">Algorithms</a> <a href="/tags/CVM/" style="font-size: 10px;">CVM</a> <a href="/tags/Data-Structures/" style="font-size: 12.22px;">Data-Structures</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Emacs/" style="font-size: 10px;">Emacs</a> <a href="/tags/Golang/" style="font-size: 16.67px;">Golang</a> <a href="/tags/Hadoop/" style="font-size: 11.11px;">Hadoop</a> <a href="/tags/Haskell/" style="font-size: 13.33px;">Haskell</a> <a href="/tags/Mistakes/" style="font-size: 13.33px;">Mistakes</a> <a href="/tags/OS/" style="font-size: 18.89px;">OS</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Qt/" style="font-size: 10px;">Qt</a> <a href="/tags/Raspberry/" style="font-size: 10px;">Raspberry</a> <a href="/tags/Safety/" style="font-size: 10px;">Safety</a> <a href="/tags/Spark/" style="font-size: 10px;">Spark</a> <a href="/tags/sicp/" style="font-size: 11.11px;">sicp</a> <a href="/tags/云存储/" style="font-size: 15.56px;">云存储</a> <a href="/tags/函数式编程/" style="font-size: 14.44px;">函数式编程</a> <a href="/tags/图分割/" style="font-size: 11.11px;">图分割</a> <a href="/tags/字符编码/" style="font-size: 11.11px;">字符编码</a> <a href="/tags/机器学习/" style="font-size: 18.89px;">机器学习</a> <a href="/tags/线程/" style="font-size: 17.78px;">线程</a> <a href="/tags/计组与体系结构/" style="font-size: 14.44px;">计组与体系结构</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://forec.cn">Forec的官方网站</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>京ICP备16060806号-1 &copy; 2016 Forec</p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'forec'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js" type="text/javascript"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js" type="text/javascript"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js" type="text/javascript"></script>

    </div>
</body>
</html>
